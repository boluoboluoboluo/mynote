

### base64 是什么？

Base64，顾名思义，就是包括小写字母a-z、大写字母A-Z、数字0-9、符号"+"、"/"一共64个字符的字符集，（另加一个“=”，实际是65个字符，至于为什么还会有一个“="，这个后面再说）。任何符号都可以转换成这个字符集中的字符，这个转换过程就叫做base64编码。

### base64怎么转换

首先将字符串（图片等）转换成[二进制序列](https://zhida.zhihu.com/search?content_id=163569337&content_type=Article&match_order=1&q=二进制序列&zhida_source=entity)，然后按每6个二进制位为一组，分成若干组，如果不足6位，则低位补0。每6位组成一个新的字节，高位补00，构成一个新的二进制序列，最后根据base64索引表中的值找到对应的字符。

我们举个例子， 假设有字符串“abc"， 我们要对其进行base64编码，最后结果会是什么呢？

字符串abc对应3个字节，一共24位，按6位为一组可分为4组，在每组的高位补上00，经过转换，abc 的 base64 编码是 YWJj， 由原来的3个字母变成了4个，所以base64会比原字符串更长。

那问题来了，假设原始字符串不够3个字节，只有一个字节或者两个字节怎么办？

以两个字节为例， 按照上面的转换逻辑，经过编码转换，第三个字节只有4位，需要在第三组前后都要加两个0，转换后的字符串是 YWI。 为了凑齐4个字节，还要在末尾补上一个"="号，最后得到的base64编码就是： "YWI="

如果原始字符只有一个字节，原理是类似的，第二个字节除了前面补两个0，还要在后面补4个0，得到的字符串是YQ，剩下两个字节也用等号“=”来凑。所以a的base64编码就是 YQ==

总结一点就是只要原始字符串的长度不能被3整除，后面的位都会用0来补充。