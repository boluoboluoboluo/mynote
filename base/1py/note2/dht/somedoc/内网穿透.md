### 1. **NAT（网络地址转换）**

- **原理**：内网设备使用私有IP地址，外网无法直接访问。路由器通过NAT将内网设备的私有IP和端口映射到路由器的公网IP和端口。
- **数据返回过程**：
  1. 内网设备发送请求时，路由器记录源IP和端口，并分配一个临时公网端口。
  2. 当外网返回数据时，路由器根据公网端口查找对应的内网IP和端口，将数据转发到正确的设备。

------

### 2. **端口映射**

- **原理**：在路由器上手动配置端口映射规则，将特定公网端口的数据转发到指定内网设备的私有IP和端口。
- **数据返回过程**：
  1. 外网数据到达路由器的公网IP和指定端口。
  2. 路由器根据映射规则，将数据转发到对应的内网设备。

------

### 3. **会话跟踪（Connection Tracking）**

- **原理**：路由器通过会话跟踪技术记录每个连接的状态，包括源IP、目标IP、源端口、目标端口等信息。
- **数据返回过程**：
  1. 内网设备发起请求时，路由器记录会话信息。
  2. 外网返回数据时，路由器根据会话信息匹配对应的内网设备。

------

### 4. **反向代理**

- **原理**：通过反向代理服务器（如Nginx、FRP）中转数据，代理服务器知道内网设备的具体地址。
- **数据返回过程**：
  1. 外网请求先到达代理服务器。
  2. 代理服务器根据配置将请求转发到内网设备。
  3. 内网设备返回数据时，代理服务器将数据转发回外网。

------

### 5. **P2P穿透**

- **原理**：在P2P网络中，通过NAT穿透技术（如STUN、TURN、ICE）直接建立设备间的连接。
- **数据返回过程**：
  1. 设备通过公网服务器交换地址信息。
  2. 数据直接发送到目标设备的公网IP和端口。